<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>User Registration</title>
    <link rel="stylesheet" href="style.css" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  </head>
  <body>
    <h2>User Registration</h2>
    <form id="userForm">
      <input type="text" id="firstName" placeholder="First Name" />
      <span class="error" id="firstNameError"></span>

      <input type="text" id="lastName" placeholder="Last Name" />
      <span class="error" id="lastNameError"></span>

      <input type="text" id="mobile" placeholder="Mobile No" />
      <span class="error" id="mobileError"></span>

      <input type="email" id="email" placeholder="Email" />
      <span class="error" id="emailError"></span>

      <input type="text" id="country" placeholder="Country" /> 
      <span class="error" id="mobileError"></span>
      <input type="text" id="state" placeholder="State" />
      <span class="error" id="mobileError"></span>
      <input type="text" id="city" placeholder="City" />
      <span class="error" id="mobileError"></span> 
      <input type="text" id="street" placeholder="Street" />
      <span class="error" id="mobileError"></span>

      <input type="text" id="loginId" placeholder="Login ID (8-12 characters)" />
      <span class="error" id="loginIdError"></span>

      <input type="password" id="password" placeholder="Password" />
      <span class="error" id="passwordError"></span>

      <button type="submit">Save</button>
      <button id="showDataButton">Show Users</button>
    </form>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
      $(document).ready(function () {
        $("#userForm").submit(function (event) {
          event.preventDefault();
          $(".error").text(""); // Pichle errors clear karo
          let isValid = true;

          let firstName = $("#firstName").val().trim();
          let lastName = $("#lastName").val().trim();
          let mobile = $("#mobile").val().trim();
          let email = $("#email").val().trim();
          let loginId = $("#loginId").val().trim();
          let password = $("#password").val().trim();

          // ✅ First Name Validation
          if (firstName === "") {
            $("#firstNameError").text("First Name is required");
            isValid = false;
          }

          // ✅ Last Name Validation
          if (lastName === "") {
            $("#lastNameError").text("Last Name is required");
            isValid = false;
          }

          // ✅ Mobile Number Validation (10 digits)
          if (!/^\d{10}$/.test(mobile)) {
            $("#mobileError").text("Enter a valid 10-digit mobile number");
            isValid = false;
          }

          // ✅ Email Validation
          if (!/^\S+@\S+\.\S+$/.test(email)) {
            $("#emailError").text("Enter a valid email address");
            isValid = false;
          }

          // ✅ Login ID Validation (Between 8 to 12 characters)
          if (!/^\w{8,12}$/.test(loginId)) {
            $("#loginIdError").text("Login ID must be between 8-12 characters");
            isValid = false;
          }

          // ✅ Password Validation (Minimum 6 characters)
          if (password.length < 6) {
            $("#passwordError").text("Password must be at least 6 characters");
            isValid = false;
          }

          // ✅ If No Errors, Submit Data
          if (isValid) {
            let userData = {
              firstName: firstName,
              lastName: lastName,
              mobile: mobile,
              email: email,
              loginId: loginId,
              password: password,
            };

            $.ajax({
              type: "POST",
              url: "https://user-registertion.onrender.com",
              data: JSON.stringify(userData),
              contentType: "application/json",
              success: function () {
                alert("User data saved successfully!");
                $("#userForm")[0].reset();
              },
              error: function (xhr) {
                console.error("Error:", xhr.responseText);
                alert("Data save nahi ho raha, Console check karo!");
              },
            });
          }
        });
      });
      $("#showDataButton").click(function () {
        window.location.href = "display.html"; // Redirect to display.html
      });
    </script>
  </body>
</html>
